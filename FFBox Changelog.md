# FFBox Changelog

`2022-04-05` 完善 SpawnInvoker 的错误处理  
`2022-04-04` 增加 SpawnInvoker 以解决 Windows 上 spawn 时出现 EPERM 的问题；新增 ffmpeg 异常终止事件监听  
`2022-03-27` FFmpegInvoke 转换为 Typescript，并解决不识别 MKV 容器的问题  
`2022-03-21` 实现文件下载功能  
`2022-03-19` 整理文件路径处理规则并规划和开发文件下载功能  
`2022-03-06` 修正远程文件文件名逻辑；改造 taskitem props；实现本地的完成任务双击打开功能  
`2022-03-05` 实现文件上传的速度显示  
`2022-02-27` 实现文件上传的进度显示  
`2022-02-26` 更新仪表盘相关数据结构和代码以增强通用性  
`2021-11-18` 修复设置音频采样率导致出错的问题；优化 dashboardTimer 逻辑；修复输出纯音频文件不能显示进度的问题  
`2021-10-06` 文件上传功能实现  
`2021-10-05` 文件上传功能开发（实现文件 hash 校验；改造 Task 类型；更改 taskAdd 接口，废除 newlyAddedTasks 设计）  
`2021-10-04` 文件上传功能开发  
`2021-10-03` 试验使用 Koa 实现文件上传  
`2021-10-02` FFmpegInvoke 改用新增的 osBridge 实现 Windows 端任务暂停和恢复（移除 PauseAndResumeProcess.exe）；新增退出动画  
`2021-10-01` 修复 UI 载入时接入服务器时序不对的问题；更新打赏中心的内容  
`2021-09-30` 优化载入流程，新增载入动画  
`2021-08-27` FFBoxService 改由主进程托管（解决因生产环境无法启动 WebSocket 服务器导致的白屏问题）；主进程改用 TypeScript  
`2021-08-26` 实现服务器接入  
`2021-08-25` combobox 增加只读、可删除功能；微调 buttonbox 外观；msgbox 新增 inputbox 功能；实现服务器接入  
`2021-08-24` 改造并接入 serviceBridge 和 uiBridge  
`2021-08-23` 学习并引入 webSocket（新增 serviceBridge 和 uiBridge）  
`2021-08-17` 更新 FFBox 官网；更新 readme.md  
`2021-08-17` 优化 combobox 体验；更新 FFBox 官网  
`2021-08-16` 清理 TypeScript 错误；清理工程文件（含去除 storybook）  
`2021-08-13` 通知中心改造；激活机制完善  
`2021-08-12` 新增激活机制  
`2021-08-11` 进行 nodeBridge、osBridge 制作；FFBoxHelper OP_BUFFER 长度增加到 8 位；FFBoxService 修复任务安排 bug；打赏中心新增 Gitee 链接  
`2021-08-10` 修复由于浅拷贝造成的调节参数时的联动问题；优化任务项的文件名显示、时间（进度）显示  
`2021-08-09` 大致完成任务运行状态更新、dashboardTimer 和 overallProgressTimer 的改造  
`2021-08-08` FFBoxServiceEvent 改造；全局任务改为 id 为 -1 的任务；完成 Service 与 UI 的包括任务列表变更、任务信息变更、调参、通知信息、命令行的信息通讯  
`2021-08-07` 修正 store state 中的 servers 类型  
`2021-07-29` 进行 utils 的 TypeScript 改造；App 新增 Service 事件处理机制；store 进行新增任务的相关改造  
`2021-07-28` 进行 ListView、CommandView、TasksView、Taskitem 的相关改造  
`2021-07-26` 更新了 store state 中的属性及 TypeScript 定义；去除 store 的全局键鼠事件机制  
`2021-07-22` combobox 操作逻辑优化完成；部分组件代码规范性优化；去除 getWindowOffsetLeft/Top；去除 store 的全局键鼠事件机制  
`2021-07-19` 完成 Windows 端 FFBoxHelper 基本功能，优化 combobox 操作逻辑  
`2021-07-07` 进行 Windows 端 FFBoxHelper 制作  
`2021-07-05` 试验在 Windows 实现窗口毛玻璃特效  
`2021-07-04` 试验在 Windows 实现窗口毛玻璃特效  
`2021-07-03` 试验在 Windows 实现窗口毛玻璃特效  
`2021-06-14` 更新了一些 TypeScript 定义  
`2021-03-23` 优化气泡组件缓动动画逻辑；Tooltip 组件改造完成  
`2021-03-21` 优化气泡组件动画；弹窗组件改造完成  
`2021-03-20` 气泡组件重构完成；TypeScript 相关改造  
`2021-03-18` 实验了通过 Vue 插件的方式实现气泡；项目结构重构  
`2021-01-31` FFBox service 实现  
`2021-01-30` 试验了 capacitor 框架；项目结构重构  

# v2.6

- 增加了 macOS 系统的相关支持
- 优化了“输出文件名”参数的相关功能
---
`2021-01-04` 修复“输出文件名”参数的识别的跨平台 bug，增加 Inputbox 的 placeholder  
`2020-12-22` 更新“输出文件名”参数的识别保留字并修改相关逻辑，少量优化浏览器启动支持性  
`2020-12-20` macOS 相关更新：多选功能；参数控件的遍历方式优化  
`2020-12-19` macOS 相关更新：字体、关闭窗口后退出  
`2020-10-16` macOS 相关更新：字体、任务暂停功能；ffmpeg 版本识别优化  

---

# v2.5

- 新增恢复默认参数功能
- 打赏中心更名“支持作者”面板，并新增支付宝红包二维码和 github 链接
- 修复升级或第一次启动后无法初始化参数的 bug
- 新增时间剪辑参数、输出文件名参数
---
`2020-09-26` “打赏中心”更名“支持作者”面板，并新增支付宝红包二维码和 github 链接；新增 Buttonbox 组件；新增恢复默认参数功能  
`2020-09-25` 新增 Inputbox 组件；新增时间剪辑参数；新增输出文件名参数；修复升级或第一次启动后无法初始化参数的 bug；打赏中心二维码改为 canvas 渲染  

---

# v2.4

- 优化了添加文件的逻辑以加快速度  
- 重新进行了参数分类  
---
`2020-09-20` 合并了 task 与 taskOrder 并更新所有对应操作代码，优化了添加文件的逻辑以加快速度  
`2020-09-19` 重新进行了参数分类  

---

# v2.3

- 调整了资源文件的布局
- 实现了 Linux 平台上的任务暂停功能
- 优化了 combomenu、slider、checkbox 等的键盘操作逻辑
- 新增了打赏中心
---
`2020-08-24` 新增了打赏中心  
`2020-08-23` 优化了一些键盘的操作逻辑（高光提示、combomenu tab 键支持、slider 和 checkbox 键盘操作）  
`2020-08-21` 修复了 vcodec 不能识别 strict2 的 bug  
`2020-08-19` 调整了资源文件的布局；增加了通过浏览器启动的支持（少量）；实现了 Linux 平台上的任务暂停功能  

---

# v2.2

- 优化了错误识别，修改了一些参数项  
- combobox 新增手动输入功能，combomenu 新增键盘操控支持  
---
`2020-08-18` 优化了错误识别，修改了一些参数项  
`2020-08-17` combobox 新增手动输入功能，combomenu 新增键盘操控支持  

---

# v2.1

- 修复了任务结束后不能开始下一个任务的 bug  
- 修复了任务栏进度、外部关闭信号、消息弹窗的 bug  
- 分离了视频和音频的码率控制参数  
---
`2020-08-05` 见版本更新内容  

---

# v2.0  

- 使用 vue-cli 重构本项目，代码量增加了，运行开销增大了，但是结构好多了，方便其他人参与项目了（虽然并不会有  
- “为以后版本铺垫的东西”其中一部分指皮肤更换功能。现在重构了，这功能就难做多了，所以白铺垫了  
- 优化了可访问性，读屏器可以更好地读出 FFBox 的窗口内容了  
- 增大了窗口三大金刚按钮和任务暂停删除重置按钮的识别范围  
- 微调了外观颜色  
- 统一了 Tooltip 样式  
- combo 菜单外观优化  
- 新增窗口元素全局拖拽捕获，拖动元素时鼠标在容器外也可捕获  
- 增加了视频和音频编码选项“自动”和“禁用”，可以选择单独禁用视频或音频了  
- “硬件编码”入口改为“编码器”，支持选择更多编码器  
- 大幅精简了分辨率列表  
- 补充了少量编码器的详细参数  
- 任务列表排版不再有 js 参与，性能会稍微好一丢丢  
- 当然因为 vue 的原因，性能又会变差一点  
- 暂时移除了“快捷”中的参数预览功能  
- “指令”中的 FFmpeg 输出现在可以显示单个任务或全局的命令行输出了  
- “指令”中的 FFmpeg 输出在隐藏时停止刷新，减少布局重流导致的 CPU 占用  
- 新增了程序新版本检查功能  
---
`2020-07-30` bug 修复  
`2020-07-29` bug 修复、提交新的 Github 分支  
`2020-07-28` 修正无容器下不输出进度的问题（scanf 改为正则表达式）、优化任务项的码率显示、修改 -strict -2 的判断逻辑  
`2020-07-27` 任务管理完善、FFmpeg 输出功能完善、保存与读取设置功能、新版本检查功能（包括服务端）制作  
`2020-07-26` 任务管理制作与 Taskitem 仪表盘刷新问题 debug  
`2020-07-25` 左侧边栏与任务暂停删除重置按钮可访问性修改、Taskitem 仪表盘刷新问题 debug、参数生成功能与 FFmpeg 输出查看功能制作  
`2020-07-24` Taskitem 制作、TasksView 基本功能实现、commonfunc 与 FFmpegInvoke 移植与引入  
`2020-07-23` TasksView 布局方式修改、Taskitem 制作  
`2020-07-19` 移植 vcodec 参数列表（完成）、slider 控件制作、vcodec 详细参数功能及对应参数生成器制作完成  
`2020-07-18` 移植 vcodec 参数列表（部分）、vcodec 详细参数功能界面逻辑制作  
`2020-07-17` 移植 vcodec 与 acodec 参数列表（部分）、tooltip 浮层制作  
`2020-07-16` 移植 format 参数列表，制作 combobox 控件、checkbox 控件与 combomenu 浮层  
`2020-07-15` js array 与 map 性能测试、列表区与参数区整体框架制作、添加窗口全局鼠标事件捕获机制  
`2020-07-08` 左侧边栏功能实现，添加了 Github 上的 readme.md  
`2020-07-07` 通知、气泡、消息窗的制作  
`2020-07-06` 浮层与内容区、标题栏与状态栏与客户区与消息中心，基本界面框架构造与可访问性优化  
`2020-07-05` 寻找可用的 vue + electron 开发工具  
`2020-07-04` 测试使用 electron-builder 生成 FFBox、在 UOS 上生成 FFBox、测试 electron-vue 框架  
`2020-07-03` 测试在 Deepin 上生成 FFBox、Noje.js 的 import 研究  

---

## v1.1  

- 对 FFmpeg 状态的识别更加准确了，消除了令人烦恼的设计缺陷  
- 增加了弹窗和气泡的动效，改善了选中任务的动效  
- 增加硬件解码模式“自动”  
- 做了一些为以后版本铺垫的东西【反正你们看不懂 (｀・ω・´)  
---
`2020-05-11` 重写 FFmpeg 回传消息读取机制（仿状态机）；分离部分字符串处理函数为 commonfunc.js；增加强制结束 FFmpeg 功能；增加硬件解码模式“自动”；修改页面布局使其更适合自定义皮肤  
`2020-05-10` 分离消息弹窗和气泡提示为独立 js，并增加了新动效；将 window[vue_taskitem] 改为全局数组；任务列表选中任务动效改善  

---

## v1.0  

`2019-11-11` 1.0 版本发布  
`2019-10-27` paralist 的码率控制判断不完整修复、仪表盘量程修改、任务 warning 提示功能  
`2019-10-16` 消息气泡第四种颜色实现、微调任务管理器；FFmpeg 处理超时判断；无法读取时长的处理方案；任务失败判断  
`2019-10-15` 消息气泡三种颜色实现、任务栏进度条实现  
`2019-10-14` 消息气泡功能实现  
`2019-10-11` 未安装 FFmpeg 的指引；命令行文件引号处理；消息气泡设计  
`2019-10-02` 任务管理器多任务并发；总体进度指示器实现  
`2019-10-01` 任务进度计算、仪表盘功能实现  
`2019-09-30` 实现任务重置  
`2019-09-28` 补充视频详细参数并增加码率控制方式 Q；实现任务开始、暂停、删除  
`2019-09-27` 补充视频详细参数  
`2019-09-26` 任务管理器  
`2019-09-25` 任务管理器  
`2019-09-23` FFmpeg 运行状态解析  
`2019-09-22` 参数列表动态生成制作和参数预览功能修复  
`2019-09-21` 参数列表动态生成制作；任务列表分辨率参数显示优化  
`2019-09-18` 视频详细参数列表增添；参数列表动态生成制作  
`2019-09-17` 视频详细参数列表增添  
`2019-09-15` 文件读取错误处理优化；参数列表动态生成方式构思  
`2019-09-14` 任务 id 与显示队列分离；任务删除功能实现  
`2019-09-10` 命令行面板设计和功能实现  
`2019-09-09` 消息中心设计和实现；命令行面板设计  
`2019-09-08` 重新制作参数识别；消息中心设计  
`2019-09-07` 命令行输出分段问题解决  
`2019-09-06` FFmpeg 自定义事件；实现拖入文件的少量格式读取  
`2019-09-05` paralist.js 分离；列表项选择功能；VB 挂起程序制作  
`2019-09-04` 参数预览功能制作；实现添加文件的 vue 绑定  
`2019-09-03` 使用 vue 框架代替 DOM 操作；修改侧边栏的页面切换特效实现方式  
`2019-09-01` 修复滑条拖动偏差问题并增加吸附功能；连接 ffmpeg；实现配置存取  
`2019-08-31` 滑条功能实现；参数开关功能实现  
`2019-08-17` combobox 动画制作  
`2019-08-16` 容器和视频编码参数收集  
`2019-08-15` 参数列表外观设计  
`2019-08-13` 任务列表进度指示器设计  
`2019-08-12` debug 机关制作；任务列表尺寸变换制作；参数小图标制作  
`2019-08-11` 任务列表设计；参数小图标制作  
`2019-08-10` 中间部分制作  
`2019-08-09` 侧边栏设计  
`2019-08-08` 退出提示弹窗设计；侧边栏小图标绘制和制作  
`2019-08-06` 整体上中下界面设计；标题栏设计  
`2019-07-31` 图标制作  
`2019-07-15` 图标手绘  